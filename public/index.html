<!DOCTYPE html>
<html lang="en" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>One Second Student Report</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800;900&display=swap" rel="stylesheet">
    <meta name="description" content="One Second Report helps educators instantly identify AI-generated content and ensure academic integrity with advanced typing rhythm analysis. Get fast, reliable student work authenticity reports.">
    <meta name="keywords" content="ai detector, plagiarism checker, typing rhythm analysis, academic integrity, student work authenticity, ai content detection, education technology, teacher tools">
    <meta name="author" content="One Second Report">
    <link rel="canonical" href="https://www.onesecreport.imaginea.store/onesecondreport.html">
    <link rel="icon" href="favicon.ico" sizes="any">
    <link rel="icon" href="favicon.svg" type="image/svg+xml">
    <link rel="apple-touch-icon" href="apple-touch-icon.png">

    <meta property="og:title" content="AI Content Detector & Typing Analysis | One Second Report">
    <meta property="og:description" content="Instantly identify AI-generated content and ensure academic integrity with advanced typing rhythm analysis.">
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://www.onesecreport.imaginea.store/onesecondreport.html">
    <meta property="og:image" content="https://www.onesecreport.imaginea.store/web-app-manifest-512x512.png">
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="AI Content Detector & Typing Analysis | One Second Report">
    <meta name="twitter:description" content="Instantly identify AI-generated content and ensure academic integrity with advanced typing rhythm analysis.">
    <meta name="twitter:image" content="https://www.onesecreport.imaginea.store/web-app-manifest-512x512.png">
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body { font-family: 'Inter', sans-serif; background-color: #ffffff; color: #000000; -webkit-font-smoothing: antialiased; -moz-osx-font-smoothing: grayscale; }
        .btn-primary { background-color: #000000; color: #ffffff; border: 1px solid #000000; transition: all 0.3s ease; }
        .btn-primary:hover { background-color: #333333; transform: translateY(-2px); box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1); }
        .btn-outline { background-color: transparent; color: #000000; border: 1px solid #000000; transition: all 0.3s ease; }
        .btn-outline:hover { background-color: #000000; color: #ffffff; }
        .sentence-ai { background-color: #ffcccc; color: #000000; padding: 4px 8px; border-radius: 4px; margin: 2px; }
        .sentence-human { background-color: #ccffcc; color: #000000; padding: 4px 8px; border-radius: 4px; margin: 2px; }
        .step-indicator { transition: all 0.4s ease; }
        .step-inactive { background-color: #f0f0f0; color: #666666; }
        .step-active { background-color: #000000; color: #ffffff; transform: scale(1.05); }
        /* --- Styles for Modal --- */
        .modal-overlay { position: fixed; top: 0; left: 0; right: 0; bottom: 0; background-color: rgba(0,0,0,0.6); display: flex; justify-content: center; align-items: center; z-index: 1000; opacity: 0; visibility: hidden; transition: opacity 0.3s ease, visibility 0.3s ease; backdrop-filter: blur(5px); }
        .modal-overlay.active { opacity: 1; visibility: visible; }
        .modal-content { background: white; padding: 2.5rem; border-radius: 1rem; max-width: 520px; width: 90%; transform: scale(0.9); transition: transform 0.3s ease; box-shadow: 0 20px 40px rgba(0,0,0,0.15); }
        .modal-overlay.active .modal-content { transform: scale(1); }
        .tab { border: 1px solid #000; padding: 0.5rem 0.75rem; font-weight: 600; }
        .tab.active { background: #000; color: #fff; }
        .tab:first-child { border-top-left-radius: 0.5rem; border-bottom-left-radius: 0.5rem; }
        .tab:last-child { border-top-right-radius: 0.5rem; border-bottom-right-radius: 0.5rem; }
    </style>
<script data-cfasync="false" nonce="0561e736-afee-4d6c-a232-6dd403f20b69">try{(function(w,d){!function(j,k,l,m){if(j.zaraz)console.error("zaraz is loaded twice");else{j[l]=j[l]||{};j[l].executed=[];j.zaraz={deferred:[],listeners:[]};j.zaraz._v="5874";j.zaraz._n="0561e736-afee-4d6c-a232-6dd403f20b69";j.zaraz.q=[];j.zaraz._f=function(n){return async function(){var o=Array.prototype.slice.call(arguments);j.zaraz.q.push({m:n,a:o})}};for(const p of["track","set","debug"])j.zaraz[p]=j.zaraz._f(p);j.zaraz.init=()=>{var q=k.getElementsByTagName(m)[0],r=k.createElement(m),s=k.getElementsByTagName("title")[0];s&&(j[l].t=k.getElementsByTagName("title")[0].text);j[l].x=Math.random();j[l].w=j.screen.width;j[l].h=j.screen.height;j[l].j=j.innerHeight;j[l].e=j.innerWidth;j[l].l=j.location.href;j[l].r=k.referrer;j[l].k=j.screen.colorDepth;j[l].n=k.characterSet;j[l].o=(new Date).getTimezoneOffset();j[l].q=[];for(;j.zaraz.q.length;){const w=j.zaraz.q.shift();j[l].q.push(w)}r.defer=!0;r.referrerPolicy="origin";r.src="/cdn-cgi/zaraz/s.js?z="+btoa(encodeURIComponent(JSON.stringify(j[l])));q.parentNode.insertBefore(r,q)};["complete","interactive"].includes(k.readyState)?zaraz.init():j.addEventListener("DOMContentLoaded",zaraz.init)}}(w,d,"zarazData","script");})(window,document)}catch(e){}</script></head>
<body class="overflow-x-hidden">
    <section class="text-center pt-10 pb-20 bg-gray-50">
        <div class="container mx-auto px-6">
            <div class="max-w-5xl mx-auto">
                <h1 class="text-5xl md:text-7xl mb-8 leading-tight font-black">
                    Identify Assignment
                    <span class="relative inline-block">
                        in 1 Second
                        <div class="absolute -bottom-2 left-0 right-0 h-1 bg-black rounded-full"></div>
                    </span>
                </h1>
                <p class="max-w-4xl mx-auto text-xl md:text-2xl text-gray-700 mb-12 leading-relaxed">
                    Teachers can now see students assignments in one second whether they wrote honestly or not.
                </p>
                <button id="get-started-btn" class="btn-primary text-xl font-bold px-10 py-4 rounded-xl transition duration-300 ease-in-out hover:shadow-lg">
                    Get Started Now
                </button>
            </div>
            <div class="mt-12">
                <div class="grid grid-cols-1 lg:grid-cols-3 gap-8">
                    <div class="text-center">
                        <div class="bg-white p-6 rounded-2xl shadow-lg h-96 relative overflow-hidden border border-gray-200">
                            <div class="flex items-center mb-4">
                                <div class="flex space-x-2">
                                    <div class="w-3 h-3 bg-red-500 rounded-full"></div>
                                    <div class="w-3 h-3 bg-yellow-500 rounded-full"></div>
                                    <div class="w-3 h-3 bg-green-500 rounded-full"></div>
                                </div>
                                <span class="ml-2 text-sm font-medium">Student Work</span>
                            </div>
                            <div class="text-left font-mono text-sm leading-relaxed h-64 overflow-y-auto">
                                <div id="student-text" class="whitespace-pre-wrap"></div>
                            </div>
                        </div>
                    </div>
                    <div class="text-center">
                        <div class="bg-white p-6 rounded-2xl shadow-lg h-96 relative overflow-hidden border border-gray-200 flex flex-col justify-center">
                            <div id="analysis-icon" class="mb-4 transition-all duration-500">
                                <div class="w-16 h-16 mx-auto bg-gray-100 rounded-2xl flex items-center justify-center">
                                    <svg class="w-8 h-8 text-gray-900" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5H7a2 2 0 00-2 2v6a2 2 0 002 2h6a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"/>
                                    </svg>
                                </div>
                            </div>
                            <h3 id="analysis-title" class="text-lg font-bold text-gray-600 mb-2">Analysis in Progress</h3>
                            <p id="analysis-description" class="text-sm text-gray-500 mb-4">Detecting AI usage...</p>
                            <div id="analysis-details" class="space-y-2 text-xs text-left opacity-0 transition-opacity duration-500">
                                <div class="flex items-center justify-between p-2 bg-gray-50 rounded"><span>AI sentences:</span><span id="ai-count" class="font-mono font-bold">0</span></div>
                                <div class="flex items-center justify-between p-2 bg-gray-50 rounded"><span>Human sentences:</span><span id="human-count" class="font-mono font-bold">0</span></div>
                            </div>
                        </div>
                    </div>
                    <div class="text-center">
                        <div class="bg-white p-6 rounded-2xl shadow-lg h-96 relative overflow-hidden border border-gray-200">
                            <div class="flex items-center justify-between mb-4 text-xs text-gray-500">
                                <div class="flex items-center space-x-2"><div class="w-2 h-2 bg-green-500 rounded-full animate-pulse"></div><span>One Second Report</span></div>
                                <div id="report-indicator" class="px-2 py-1 rounded text-xs font-semibold bg-gray-100 text-gray-500">Status: Analyzing</div>
                            </div>
                            <div class="text-left h-64 overflow-y-auto">
                                <div id="report-output" class="text-sm whitespace-pre-wrap leading-relaxed min-h-full p-3 bg-gray-50 rounded-lg border">Report will appear here...</div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="flex justify-center my-12">
                    <div class="flex items-center space-x-4">
                        <div id="step1" class="step-indicator px-4 py-2 rounded-full text-sm font-semibold">Step 1</div>
                        <div class="w-8 h-0.5 bg-gray-300"></div>
                        <div id="step2" class="step-indicator px-4 py-2 rounded-full text-sm font-semibold">Step 2</div>
                        <div class="w-8 h-0.5 bg-gray-300"></div>
                        <div id="step3" class="step-indicator px-4 py-2 rounded-full text-sm font-semibold">Step 3</div>
                    </div>
                </div>
                <div class="text-center mt-8"><button id="restart-demo" class="btn-outline px-6 py-3 rounded-xl">Restart Demo</button></div>
            </div>
        </div>
    </section>
    <footer class="bg-white border-t border-gray-200">
        <div class="container mx-auto px-6 py-12">
            <div class="flex flex-col md:flex-row justify-between items-center">
                <div class="flex items-center space-x-3 mb-4 md:mb-0">
                    <div class="w-8 h-8 bg-black rounded-lg flex items-center justify-center">
                        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" class="text-white" xmlns="http://www.w3.org/2000/svg"><path d="M8 9H12V11H10V14H8V9ZM14 9H16V15H14V9Z" fill="currentColor"/></svg>
                    </div>
                    <span class="text-lg font-bold">One Second Report</span>
                </div>
                <div class="text-gray-600 text-center md:text-right">
                    <p>&copy; 2025 One Second Report. Empowering educators with instant insights.</p>
                </div>
            </div>
        </div>
    </footer>

    <!-- EMAIL / AUTH MODAL -->
    <div id="email-modal" class="modal-overlay">
        <div class="modal-content text-center relative">
            <button id="close-modal-btn" class="absolute top-2 right-4 text-gray-500 hover:text-black text-3xl font-bold" aria-label="Close">&times;</button>
            <h2 class="text-3xl font-bold mb-2">Get Full Access</h2>
            <p class="text-gray-600 mb-4">Enter your email and password to subscribe and unlock all features.</p>

            <div class="flex justify-center mb-4">
                <button id="tab-signup" class="tab active">Sign Up</button>
                <button id="tab-login" class="tab">Log In</button>
            </div>

            <form id="email-form" class="space-y-4">
                <input type="email" id="email-input" placeholder="your@email.com" required class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-black">
                <input type="password" id="password-input" placeholder="Password (min 8 chars)" required class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-black">
                <div class="grid grid-cols-1 gap-4">
                    <button type="submit" data-action="checkout" class="bg-green-600 text-white w-full py-3 rounded-lg font-semibold hover:bg-green-700">Subscribe Now</button>
                </div>
                <p id="auth-error" class="text-red-600 text-sm" style="display:none"></p>
                <div id="checkout-fallback" style="display:none" class="text-sm text-left bg-yellow-50 border border-yellow-200 p-3 rounded">
                    We attempted to redirect you to the secure payment page. If you are not redirected automatically,
                    <a id="checkout-link" class="underline font-semibold" href="#" rel="noopener">click here to continue to payment</a>.
                </div>
            </form>
        </div>
    </div>

    <script>
        // --- DEMO SCRIPT ---
        const studentText = "The Industrial Revolution was a major turning point in history. It began in Britain in the late 18th century. This period saw the transition from manual production methods to machines. New chemical manufacturing and iron production processes were developed. The introduction of steam power was particularly important. Textile industries were the first to adopt modern production methods.";
        const studentTextEl = document.getElementById('student-text');
        const reportOutputEl = document.getElementById('report-output');
        const analysisIcon = document.getElementById('analysis-icon');
        const analysisTitle = document.getElementById('analysis-title');
        const analysisDescription = document.getElementById('analysis-description');
        const analysisDetails = document.getElementById('analysis-details');
        const aiCount = document.getElementById('ai-count');
        const humanCount = document.getElementById('human-count');
        const reportIndicator = document.getElementById('report-indicator');
        const stepIndicators = [document.getElementById('step1'), document.getElementById('step2'), document.getElementById('step3')];
        const restartDemoBtn = document.getElementById('restart-demo');
        let typingInterval;

        const updateStepIndicator = (activeIndex) => {
            stepIndicators.forEach((step, index) => {
                step.className = 'step-indicator px-4 py-2 rounded-full text-sm font-semibold ';
                step.className += (index === activeIndex) ? 'step-active' : 'step-inactive';
            });
        };

        const resetUI = () => {
            clearInterval(typingInterval);
            studentTextEl.innerHTML = '';
            reportOutputEl.innerHTML = 'Report will appear here...';
            analysisTitle.textContent = 'Analysis in Progress';
            analysisDescription.textContent = 'Detecting AI usage...';
            analysisDetails.classList.add('opacity-0');
            setTimeout(runDemo, 5000); // Restart demo after 5 seconds

            reportIndicator.className = 'px-2 py-1 rounded text-xs font-semibold bg-gray-100 text-gray-500';
            reportIndicator.textContent = 'Status: Analyzing';
            updateStepIndicator(-1);
        };

        function runDemo() {
            resetUI();
            updateStepIndicator(0);
            let i = 0;
            typingInterval = setInterval(() => {
                if (i < studentText.length) {
                    studentTextEl.textContent += studentText.charAt(i);
                    i++;
                } else {
                    clearInterval(typingInterval);
                    setTimeout(analyzeContent, 1000);
                }
            }, 10);
        }

        function analyzeContent() {
            updateStepIndicator(1);
            analysisTitle.textContent = 'Analyzing Content...';
            analysisIcon.innerHTML = '<div class="w-16 h-16 mx-auto rounded-2xl flex items-center justify-center"><svg class="w-8 h-8 text-black animate-spin" fill="none" viewBox="0 0 24 24"><circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle><path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path></svg></div>';
            setTimeout(generateReport, 2000);
        }

        function generateReport() {
            updateStepIndicator(2);
            analysisTitle.textContent = 'Analysis Complete';
            analysisDescription.textContent = 'Report generated successfully.';
            analysisIcon.innerHTML = '<div class="w-16 h-16 mx-auto rounded-2xl flex items-center justify-center"><svg class="w-8 h-8 text-black" fill="none" stroke="currentColor" viewBox="0 0 24 24" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M9 12.75L11.25 15 15 9.75m-3-7.036A11.959 11.959 0 013.598 6 11.99 11.99 0 003 9.749c0 5.592 3.824 10.29 9 11.623 5.176-1.332 9-6.03 9-11.623 0-1.602-.39-3.124-1.098-4.51M12 4.5v1.428" /></svg></div>';
            reportOutputEl.innerHTML = studentText.split('. ').map((s, idx) => s.trim() ? `<span class="${idx % 2 === 0 ? 'sentence-human' : 'sentence-ai'}">${s}.</span>` : '').join(' ');
            reportIndicator.className = 'px-2 py-1 rounded text-xs font-semibold bg-green-100 text-green-800';
            reportIndicator.textContent = 'Status: Complete';
            aiCount.textContent = '3';
            humanCount.textContent = '3';
            analysisDetails.classList.remove('opacity-0');
        }

        restartDemoBtn.addEventListener('click', runDemo);
        window.addEventListener('load', () => {
            runDemo();
            checkMe();
        });

        // Ensure session has propagated to KV before calling checkout
        async function ensureSessionReady(workerUrl) {
            const maxAttempts = 5;
            for (let i = 0; i < maxAttempts; i++) {
                try {
                    const r = await fetch(workerUrl + '/api/me', { method: 'GET', credentials: 'include' });
                    if (r.ok) return true;
                } catch (e) {
                    // ignore
                }
                await new Promise(res => setTimeout(res, 300));
            }
            return false;
        }

        // Helper: detect active subscription and flip CTA to open /track instead of modal
        async function checkMe() {
            try {
                const r = await fetch('/api/me', { method: 'GET', credentials: 'include' });
                if (r.ok) {
                    const j = await r.json();
                    currentUserEmail = (j?.user?.email || "").toLowerCase();
                    if (j?.subscription?.status === 'active') {
                        directToTrack = true;
                        const btn = document.getElementById('get-started-btn');
                        if (btn) btn.textContent = 'Open Track';
                    }
                }
            } catch { /* ignore */ }
        }

        // --- MODAL + AUTH + PAYMENT ---
        const getStartedBtn = document.getElementById('get-started-btn');
        const emailModal = document.getElementById('email-modal');
        const emailForm = document.getElementById('email-form');
        const emailInput = document.getElementById('email-input');
        const passwordInput = document.getElementById('password-input');
        const closeModalBtn = document.getElementById('close-modal-btn');
        const authError = document.getElementById('auth-error');
        let directToTrack = false;
        let currentUserEmail = null;

        const tabSignup = document.getElementById('tab-signup');
        const tabLogin  = document.getElementById('tab-login');
        let authMode = 'signup'; // 'signup' | 'login'

        const showModal = () => emailModal.classList.add('active');
        const hideModal = () => emailModal.classList.remove('active');

        const setAuthMode = (mode) => {
            authMode = mode;
            if (mode === 'signup') {
                tabSignup.classList.add('active');
                tabLogin.classList.remove('active');
            } else {
                tabLogin.classList.add('active');
                tabSignup.classList.remove('active');
            }
        };

        getStartedBtn.addEventListener('click', (e) => {
            e.preventDefault();
            if (directToTrack) {
                window.location.href = '/track';
            } else {
                showModal();
            }
        });
        closeModalBtn.addEventListener('click', hideModal);
        emailModal.addEventListener('click', (e) => { if (e.target === emailModal) hideModal(); });
        tabSignup.addEventListener('click', () => setAuthMode('signup'));
        tabLogin.addEventListener('click', () => setAuthMode('login'));

        emailForm.addEventListener('submit', async (e) => {
            e.preventDefault();
            authError.style.display = 'none';
            const email = emailInput.value.trim().toLowerCase();
            const password = passwordInput.value;

            if (!email) { authError.textContent = 'Please enter a valid email.'; authError.style.display = 'block'; return; }
            if (!password || password.length < 8) { authError.textContent = 'Password must be at least 8 characters.'; authError.style.display = 'block'; return; }

            const submitBtn = e.submitter;
            const originalText = submitBtn.textContent;
            submitBtn.disabled = true;
            submitBtn.textContent = 'Processing...';

            try {
                const workerUrl = window.location.origin;

                // If a session exists for a different email, clear it to avoid stale-account leaks
                try {
                    const meRes = await fetch(workerUrl + '/api/me', { method: 'GET', credentials: 'include' });
                    if (meRes.ok) {
                        const me = await meRes.json();
                        const meEmail = (me?.user?.email || '').toLowerCase();
                        if (meEmail && meEmail !== email) {
                            await fetch(workerUrl + '/api/logout', { method: 'POST', credentials: 'include' });
                            currentUserEmail = null;
                        }
                    }
                } catch {}

                // moved: verify-payment check now happens AFTER successful auth to avoid 401/409 loops

                // 2) Auth (in-modal) with automatic fallback:
                //    If signup returns 409 (already exists), try login with the same credentials.
                let authJson;
                if (authMode === 'signup') {
                    const signupRes = await fetch(workerUrl + '/api/signup', {
                        method: 'POST',
                        headers: { 'Content-Type': 'application/json' },
                        credentials: 'include',
                        body: JSON.stringify({ email, password })
                    });
                    if (signupRes.status === 409) {
                        // Account exists. Do NOT auto-login with a possibly wrong password.
                        // Switch to login tab and ask the user to enter the correct password.
                        setAuthMode('login');
                        authError.textContent = 'Account already exists. Please log in with your password.';
                        authError.style.display = 'block';
                        emailInput.value = email;
                        submitBtn.disabled = false;
                        submitBtn.textContent = originalText;
                        return;
                    } else {
                        {
                            const ct = signupRes.headers.get('content-type') || '';
                            let parsed = null;
                            if (ct.includes('application/json')) {
                                parsed = await signupRes.json();
                            } else {
                                const txt = await signupRes.text();
                                throw new Error(txt || `Signup failed (status ${signupRes.status})`);
                            }
                            if (!signupRes.ok) {
                                throw new Error(parsed?.error || 'Signup failed');
                            }
                            authJson = parsed;
                        }
                    }
                } else {
                    const loginRes = await fetch(workerUrl + '/api/login', {
                        method: 'POST',
                        headers: { 'Content-Type': 'application/json' },
                        credentials: 'include',
                        body: JSON.stringify({ identifier: email, password })
                    });
                    {
                        const ct = loginRes.headers.get('content-type') || '';
                        let parsed = null;
                        if (ct.includes('application/json')) {
                            parsed = await loginRes.json();
                        } else {
                            const txt = await loginRes.text();
                            throw new Error(txt || `Authentication failed (status ${loginRes.status})`);
                        }
                        if (!loginRes.ok) {
                            throw new Error(parsed?.error || 'Authentication failed');
                        }
                        authJson = parsed;
                    }
                }

                // 3) Post-auth: ensure session is readable then decide path
                await ensureSessionReady(workerUrl);

                // 3a) If subscription is already active (local), go straight to /track
                try {
                    const meR = await fetch(workerUrl + '/api/me', { method: 'GET', credentials: 'include' });
                    if (meR.ok) {
                        const meJ = await meR.json();
                        if (meJ?.subscription?.status === 'active') {
                            window.location.href = '/track';
                            return;
                        }
                    }
                } catch {}

                // 3b) If not locally active, check remote (email-based) paid status to avoid duplicate checkout
                try {
                    const chk = await fetch(workerUrl + '/api/verify-payment', {
                        method: 'POST',
                        headers: { 'Content-Type': 'application/json' },
                        credentials: 'include',
                        body: JSON.stringify({ email })
                    });
                    const chkCt = chk.headers.get('content-type') || '';
                    const chkData = chkCt.includes('application/json') ? await chk.json() : null;
                    if (chk.ok && chkData?.status === 'paid') {
                        window.location.href = '/track';
                        return;
                    }
                } catch {}

                const checkoutPath = workerUrl + '/checkout';

                // Show fallback link immediately
                const fb = document.getElementById('checkout-fallback');
                const a = document.getElementById('checkout-link');
                if (a) a.href = checkoutPath;
                if (fb) fb.style.display = 'block';

                // Primary redirect
                submitBtn.textContent = 'Redirecting to Payment...';
                console.log('[FRONTEND] Redirecting to checkout (server-side):', checkoutPath);
                try {
                    window.location.assign(checkoutPath);
                } catch (e) {
                    console.warn('[FRONTEND] location.assign failed, trying href', e);
                    try { window.location.href = checkoutPath; } catch {}
                }

                // Secondary timed fallbacks
                setTimeout(() => {
                    if (document.visibilityState === 'visible') {
                        try { window.location.replace(checkoutPath); } catch {}
                    }
                }, 400);

                setTimeout(() => {
                    if (document.visibilityState === 'visible') {
                        try { window.open(checkoutPath, '_self'); } catch {}
                    }
                }, 1000);

            } catch (err) {
                console.error(err);
                authError.textContent = (err && err.message) ? err.message : 'Something went wrong. Please try again.';
                authError.style.display = 'block';
                submitBtn.disabled = false;
                submitBtn.textContent = originalText;
            }
        });

        // Auto-open modal after a short delay
        setTimeout(showModal, 3000);
    </script>

</body>
</html>